---
layout: post
title: "【基本概念】卷积（Convolution）"
date: 2021-03-25
category: Signal-Processing
typora-root-url: ../../../Kazite.github.io
typora-copy-images-to: ../../assets_2021Early
---

# 如何理解卷积运算

## 卷积（Convolution）基本概念

$$
\begin{aligned}
& 假定f(x),g(x)是R上两个可积函数，一般称（f*g）(n)为f,g的卷积，其可以被定义为：\\
& (f * g)(n)=\int_{-\infty}^{\infty} f(\tau) g(n-\tau) d \tau \\
& 离散定义为： \\
& (f * g)(n)=\sum_{\tau=-\infty}^{\infty} f(\tau) g(n-\tau) \\
\end{aligned}
$$

## 卷积定义图解

假定x=t，y=n-t,x+y=n可以视作下面直线的遍历

<img src="/assets_2021Early/2021-03-25-卷积-01.gif" alt="2021-03-25-卷积-01" style="zoom:50%;" />

遍历这些直线，好比将毛巾沿着角卷起来，某种意义上可这样理解为“卷积”

## 案例分析

### 离散卷积案例——丢骰子问题

丢出两枚骰子，点数加起来为4的概率是多少？

枚举法：
$$
f(1)g(3)+f(2)g(2)+f(3)g(1)
$$


卷积形式表达：
$$
(f*g)(4)=\sum_{m=1}{3}f(3-m)g(m)
$$

### 连续卷积案例——做馒头问题

假定馒头生产速度为f，腐败速度为g，求二十四小时后，馒头的腐败数量

卷积形式表达
$$
\int_{0}^{24} f(t) g(24-t) d t
$$

### 图像处理问题

图像降噪问题中，卷积等效为矩阵在图像上的滑动：

<img src="/assets_2021Early/2021-03-25-卷积-02.gif" alt="2021-03-25-卷积-02" style="zoom: 50%;" />

### 信号分析问题

#### 输入信号与系统响应函数

如下图所示，输入信号是 f(t) ，是随时间变化的。系统响应函数是 g(t) ，图中的响应函数是随时间指数下降的，它的物理意义是说：如果在 t=0 的时刻有一个输入，那么随着时间的流逝，这个输入将不断衰减。换言之，到了 t=T时刻，原来在 t=0 时刻的输入f(0)的值将衰减为f(0)g(T)。

<img src="/assets_2021Early/2021-03-25-卷积-03.jpg" alt="2021-03-25-卷积-03" style="zoom: 33%;" />

#### 信号输出

考虑到信号是连续输入的，也就是说，每个时刻都有新的信号进来，所以，最终输出的是所有之前输入信号的累积效果。

如下图所示，T=10时刻的输出结果，与图中标记的整体区域有关，是每个时刻共同作用的结果。举例来说，T=9时刻的输入f(9)，在经过1s的衰减之后，贡献输出为f(9)g(1)；T=10时刻的输出f(10)，贡献的输出则为f(10)g(0)

<img src="/assets_2021Early/2021-03-25-卷积-04.jpg" alt="2021-03-25-卷积-04" style="zoom: 33%;" />

#### 卷积表示

令g(t)->g(-t)，即“卷”

<img src="/assets_2021Early/2021-03-25-卷积-05.jpg" alt="2021-03-25-卷积-05" style="zoom:33%;" />

平移T个单位，下图也是卷积定义的另一种图形表述

<img src="/assets_2021Early/2021-03-25-卷积-06.jpg" alt="2021-03-25-卷积-06" style="zoom:33%;" />

所以，在以上计算T时刻的卷积时，要维持的约束就是： t+ (T-t) = T 。

## 卷积表达式中各函数的物理意义

* 卷积表达式中:

  函数f表示对象对系统的作用速度

  第二个函数g表示当作用速度为冲击函数时这个对象对系统的作用效果

* 对卷积的意义的理解：

  从“积”的过程可以看到，我们得到的叠加值，是个全局的概念。以信号分析为例，卷积的结果是不仅跟当前时刻输入信号的响应值有关，也跟过去所有时刻输入信号的响应都有关系，考虑了对过去的所有输入的效果的累积。在图像处理的中，卷积处理的结果，其实就是把每个像素周边的，甚至是整个图像的像素都考虑进来，对当前像素进行某种加权处理。所以说，“积”是全局概念，或者说是一种“混合”，把两个函数在时间或者空间上进行混合。

  那为什么要进行“卷”？直接相乘不好吗？我的理解，进行“卷”（翻转）的目的其实是施加一种约束，它指定了在“积”的时候以什么为参照。在信号分析的场景，它指定了在哪个特定时间点的前后进行“积”，在空间分析的场景，它指定了在哪个位置的周边进行累积处理。

## 参考资料

* [知乎：如何通俗易懂地理解卷积](https://www.zhihu.com/question/22298352)
* 《数字信号处理（第二版）》程乾生，北京大学出版社
* 《信号与系统引论》 郑君里，应启珩，杨为理，高等教育出版社

